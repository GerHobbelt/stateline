<html>
  <head>
    <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.js" charset="utf-8"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <div id="chart"></div>
    <script type="text/javascript">
      var columns = [
        ['x', 0],
      ];

      var chart = c3.generate({
        bindto: '#chart',
        data: {
          x: 'x',
          columns: columns
        }
      });

      setInterval(function() {
        d3.json("http://localhost:8080/chains", function(error, json) {
            console.log(json);
            if (error) return console.warn(error);

            for (var i = 0; i < json.length; i++) {
              chain = json[i];
              if (columns[chain.id + 1]) {
                columns[chain.id + 1].push(chain.length);
              } else {
                columns[chain.id + 1] = [chain.id.toString(), chain.length];
              }
            }
            columns[0].push(columns[0][columns[0].length - 1] + 1);
            console.log(columns)

            chart.load({
              columns: columns
            });
          });
      }, 1000);
    </script>
  </body>
</html>
